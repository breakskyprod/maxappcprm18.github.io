<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–¶–µ–Ω—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º MAX Bridge -->
    <script src="https://st.max.ru/js/max-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: #f5f0fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 16px;
        }
        
        .app-container {
            max-width: 500px;
            width: 100%;
            background: white;
            border-radius: 32px;
            padding: 24px;
            box-shadow: 0 20px 40px rgba(120, 30, 180, 0.15);
        }
        
        h1 {
            font-size: 24px;
            color: #1D1D1D;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .address {
            font-size: 14px;
            color: #666;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .menu {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .menu-item {
            flex: 1;
            background: #f8f4ff;
            border-radius: 20px;
            padding: 16px 8px;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .menu-item:hover {
            border-color: #781EB4;
            background: #f0e6ff;
        }
        
        .menu-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .form-section {
            background: #f8f4ff;
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        label {
            display: block;
            font-size: 14px;
            color: #781EB4;
            font-weight: 600;
            margin-bottom: 6px;
        }
        
        input, select {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0d0f0;
            border-radius: 16px;
            font-size: 16px;
        }
        
        input:focus {
            border-color: #781EB4;
            outline: none;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .policy {
            font-size: 13px;
            color: #666;
            margin: 16px 0;
            padding: 12px;
            background: #f0e6ff;
            border-radius: 12px;
        }
        
        .policy a {
            color: #781EB4;
            font-weight: 600;
            text-decoration: none;
        }
        
        .button {
            width: 100%;
            padding: 18px;
            background: #781EB4;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 8px 16px rgba(120, 30, 180, 0.2);
        }
        
        .button:active {
            transform: scale(0.98);
        }
        
        .back-button {
            background: none;
            border: none;
            color: #781EB4;
            font-size: 16px;
            font-weight: 600;
            padding: 10px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #781EB4;
            color: white;
            padding: 12px 24px;
            border-radius: 40px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="mainScreen">
            <h1>
                <span>üõ°Ô∏è</span>
                –ë–£ –£–† ¬´–¶–µ–Ω—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏¬ª
            </h1>
            <div class="address">
                <span>üìç</span>
                <a href="https://yandex.ru/maps/-/CPQtMK1x" style="color: inherit; text-decoration: none;" id="addressLink">
                    –£–†, –≥. –ò–∂–µ–≤—Å–∫, —É–ª. –°–æ—Ñ—å–∏ –ö–æ–≤–∞–ª–µ–≤—Å–∫–æ–π, 8–∞
                </a>
            </div>
            
            <div class="menu">
                <div class="menu-item" onclick="showConsultForm()">
                    <div class="menu-icon">üó£Ô∏è</div>
                    <div>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</div>
                </div>
                <div class="menu-item" onclick="showInviteForm()">
                    <div class="menu-icon">üìÖ</div>
                    <div>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</div>
                </div>
                <div class="menu-item" onclick="openECAS()">
                    <div class="menu-icon">üîó</div>
                    <div>–ï–¶–ê–°</div>
                </div>
            </div>
            
            <div style="margin-top: 20px;">
                <div style="display: flex; align-items: center; gap: 10px; color: #666;">
                    <span>‚ùì –£—Ç–æ—á–Ω–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã:</span>
                    <a href="tel:+73412930345" style="color: #781EB4; text-decoration: none; font-weight: 600;">+7 (3412) 93-03-45</a>
                </div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω —Ñ–æ—Ä–º—ã -->
        <div id="formScreen" class="hidden">
            <button class="back-button" onclick="showMainScreen()">
                ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </button>
            <div id="formContent"></div>
        </div>
    </div>
    
    <div id="toast" class="toast"></div>
    
    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ MAX
        const WebApp = window.WebApp;
        if (!WebApp) {
            alert('–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ MAX');
        } else {
            // –°–æ–æ–±—â–∞–µ–º, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
            WebApp.ready();
            WebApp.BackButton.show();
            WebApp.BackButton.onClick(() => {
                if (!document.getElementById('formScreen').classList.contains('hidden')) {
                    showMainScreen();
                } else {
                    WebApp.close();
                }
            });
        }
        
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
        const POLICY_URL = 'https://disk.yandex.ru/d/KrLs5xKSHHgzmA';
        
        // –§—É–Ω–∫—Ü–∏–∏ –ø–æ–∫–∞–∑–∞ —ç–∫—Ä–∞–Ω–æ–≤
        function showMainScreen() {
            document.getElementById('mainScreen').classList.remove('hidden');
            document.getElementById('formScreen').classList.add('hidden');
        }
        
        function showFormScreen() {
            document.getElementById('mainScreen').classList.add('hidden');
            document.getElementById('formScreen').classList.remove('hidden');
        }
        
        // ==============================================
        // üöÄ –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –û–¢–ü–†–ê–í–ö–ò –í –ß–ê–¢-–ë–û–¢
        // ==============================================
        function sendToBot(data) {
            // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            let message = '';
            
            if (data.type === 'consultation') {
                message = 'üìù –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –ù–ê –ö–û–ù–°–£–õ–¨–¢–ê–¶–ò–Æ\n\n' +
                         'üë§ –§–ò–û: ' + data.fullName + '\n' +
                         'üìû –¢–µ–ª–µ—Ñ–æ–Ω: ' + data.phone + '\n' +
                         'üîÅ –¢–∏–ø: ' + data.consultType + '\n' +
                         'üïê –í—Ä–µ–º—è: ' + data.timestamp;
            } else if (data.type === 'event_invite') {
                message = 'üé´ –ü–†–ò–ì–õ–ê–®–ï–ù–ò–ï –ù–ê –ú–ï–†–û–ü–†–ò–Ø–¢–ò–ï\n\n' +
                         'üë§ –§–ò–û: ' + data.fullName + '\n' +
                         'üìå –î–æ–ª–∂–Ω–æ—Å—Ç—å: ' + data.position + '\n' +
                         'üìû –¢–µ–ª–µ—Ñ–æ–Ω: ' + data.phone + '\n' +
                         'üèôÔ∏è –ú—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: ' + data.municipality + '\n' +
                         'üè¢ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: ' + data.organization + '\n' +
                         'üïê –í—Ä–µ–º—è: ' + data.timestamp;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞
            if (WebApp && WebApp.initDataUnsafe && WebApp.initDataUnsafe.user) {
                const user = WebApp.initDataUnsafe.user;
                const userName = [user.last_name, user.first_name].filter(Boolean).join(' ');
                if (userName) {
                    message += '\n\nüë§ –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –≤ MAX: ' + userName;
                }
            }
            
            // ‚ö°‚ö°‚ö° –í–û–¢ –¢–£–¢ –ü–†–û–ò–°–•–û–î–ò–¢ –ú–ê–ì–ò–Ø ‚ö°‚ö°‚ö°
            // –≠—Ç–∞ —Å—Ç—Ä–æ—á–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä—è–º–æ –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º
            if (WebApp && WebApp.sendData) {
                try {
                    WebApp.sendData(message);
                    showToast('‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —á–∞—Ç!');
                } catch (e) {
                    showToast('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');
                    console.error(e);
                }
            } else {
                showToast('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å');
            }
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(showMainScreen, 2000);
        }
        
        // ==============================================
        // –§–û–†–ú–ê –ö–û–ù–°–£–õ–¨–¢–ê–¶–ò–ò
        // ==============================================
        window.showConsultForm = function() {
            const formHtml = `
                <h2 style="margin-bottom: 20px; color: #1D1D1D;">üó£Ô∏è –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</h2>
                <div class="form-section">
                    <div class="form-group">
                        <label>–§–∞–º–∏–ª–∏—è –∏ –∏–º—è</label>
                        <input type="text" id="consultName" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω">
                    </div>
                    <div class="form-group">
                        <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                        <input type="tel" id="consultPhone" placeholder="+7 912 345-67-89">
                    </div>
                    <div class="form-group">
                        <label>–¢–∏–ø –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="consultType" value="–ü–µ—Ä–≤–∏—á–Ω–æ" checked> –ü–µ—Ä–≤–∏—á–Ω–æ
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="consultType" value="–ü–æ–≤—Ç–æ—Ä–Ω–æ"> –ü–æ–≤—Ç–æ—Ä–Ω–æ
                            </label>
                        </div>
                    </div>
                </div>
                <div class="policy">
                    –ù–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É, –≤—ã –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ 
                    <a href="#" onclick="window.WebApp.openLink('${POLICY_URL}'); return false;">–æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a> 
                    –∏ —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å 
                    <a href="#" onclick="window.WebApp.openLink('${POLICY_URL}'); return false;">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>.
                </div>
                <button class="button" onclick="submitConsultForm()">‚úÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
            `;
            
            document.getElementById('formContent').innerHTML = formHtml;
            showFormScreen();
        };
        
        window.submitConsultForm = function() {
            const name = document.getElementById('consultName')?.value.trim();
            const phone = document.getElementById('consultPhone')?.value.trim();
            const consultType = document.querySelector('input[name="consultType"]:checked')?.value;
            
            if (!name || !phone) {
                showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }
            
            const data = {
                type: 'consultation',
                fullName: name,
                phone: phone,
                consultType: consultType,
                timestamp: new Date().toLocaleString('ru-RU')
            };
            
            sendToBot(data);
        };
        
        // ==============================================
        // –§–û–†–ú–ê –ü–†–ò–ì–õ–ê–®–ï–ù–ò–Ø
        // ==============================================
        window.showInviteForm = function() {
            const formHtml = `
                <h2 style="margin-bottom: 20px; color: #1D1D1D;">üìÖ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</h2>
                <div class="form-section">
                    <div class="form-group">
                        <label>–§–ò–û</label>
                        <input type="text" id="inviteFullName" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
                    </div>
                    <div class="form-group">
                        <label>–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                        <input type="text" id="invitePosition" placeholder="–î–∏—Ä–µ–∫—Ç–æ—Ä, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç...">
                    </div>
                    <div class="form-group">
                        <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                        <input type="tel" id="invitePhone" placeholder="+7 912 345-67-89">
                    </div>
                    <div class="form-group">
                        <label>–ú—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="inviteMunicipality" placeholder="–≥. –ò–∂–µ–≤—Å–∫, –ó–∞–≤—å—è–ª–æ–≤—Å–∫–∏–π —Ä-–Ω...">
                    </div>
                    <div class="form-group">
                        <label>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</label>
                        <input type="text" id="inviteOrg" placeholder="–û–û–û –ü—Ä–∏–º–µ—Ä, –®–∫–æ–ª–∞ ‚Ññ1...">
                    </div>
                </div>
                <div class="policy">
                    –ù–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É, –≤—ã –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ 
                    <a href="#" onclick="window.WebApp.openLink('${POLICY_URL}'); return false;">–æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a> 
                    –∏ —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å 
                    <a href="#" onclick="window.WebApp.openLink('${POLICY_URL}'); return false;">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>.
                </div>
                <button class="button" onclick="submitInviteForm()">‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</button>
            `;
            
            document.getElementById('formContent').innerHTML = formHtml;
            showFormScreen();
        };
        
        window.submitInviteForm = function() {
            const fullName = document.getElementById('inviteFullName')?.value.trim();
            const position = document.getElementById('invitePosition')?.value.trim();
            const phone = document.getElementById('invitePhone')?.value.trim();
            const municipality = document.getElementById('inviteMunicipality')?.value.trim();
            const org = document.getElementById('inviteOrg')?.value.trim();
            
            if (!fullName || !position || !phone || !municipality || !org) {
                showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }
            
            const data = {
                type: 'event_invite',
                fullName: fullName,
                position: position,
                phone: phone,
                municipality: municipality,
                organization: org,
                timestamp: new Date().toLocaleString('ru-RU')
            };
            
            sendToBot(data);
        };
        
        // ==============================================
        // –ï–¶–ê–°
        // ==============================================
        window.openECAS = function() {
            if (WebApp && WebApp.openLink) {
                WebApp.openLink('https://vk.com/feed');
            } else {
                window.open('https://vk.com/feed', '_blank');
            }
        };
        
        // ==============================================
        // –ê–¥—Ä–µ—Å –Ω–∞ –∫–∞—Ä—Ç–µ
        // ==============================================
        document.getElementById('addressLink').addEventListener('click', function(e) {
            e.preventDefault();
            if (WebApp && WebApp.openLink) {
                WebApp.openLink('https://yandex.ru/maps/-/CPQtMK1x');
            } else {
                window.open('https://yandex.ru/maps/-/CPQtMK1x', '_blank');
            }
        });
        
        // ==============================================
        // TOAST (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
        // ==============================================
        function showToast(text) {
            const toast = document.getElementById('toast');
            toast.textContent = text;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }
    </script>
</body>
</html>
</html>
</body>
</html>
