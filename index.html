<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¶–µ–Ω—Ç—Ä –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏</title>
    <!-- MAX Bridge (–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ MAX) -->
    <script src="https://st.max.ru/js/max-web-app.js"></script>
    <!-- –≤–∞—à —Å—Ç–∏–ª—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
</head>
<body>
    <!-- –≤–∞—à HTML –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->

    <script>
        (function() {
            'use strict';

            // === –ê–î–ê–ü–¢–ï–† –î–õ–Ø GITHUB PAGES ===
            const WebApp = window.WebApp;
            const isMaxEnvironment = !!WebApp; // true = –≤–Ω—É—Ç—Ä–∏ MAX, false = –±—Ä–∞—É–∑–µ—Ä

            // –°–æ–∑–¥–∞—ë–º –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
            if (!isMaxEnvironment) {
                console.log('üñ•Ô∏è –ó–∞–ø—É—Å–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (GitHub Pages)');
                window.WebApp = window.WebApp || {
                    ready: () => {},
                    close: () => alert('–ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–¥–µ–º–æ)'),
                    enableClosingConfirmation: () => {},
                    BackButton: {
                        show: () => {},
                        onClick: (cb) => {},
                        hide: () => {}
                    },
                    HapticFeedback: {
                        impactOccurred: () => {},
                        notificationOccurred: () => {},
                        selectionChanged: () => {}
                    },
                    openLink: (url) => window.open(url, '_blank'),
                    sendData: (data) => {
                        console.log('üì® –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —á–∞—Ç MAX (–¥–µ–º–æ):', data);
                        alert('‚úÖ –í —Ä–µ–∂–∏–º–µ GitHub Pages: –∑–∞—è–≤–∫–∞ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ MAX\n\n' + data);
                    },
                    initDataUnsafe: {
                        user: { id: 123, first_name: '–¢–µ—Å—Ç', last_name: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' }
                    }
                };
            }

            // –¢–µ–ø–µ—Ä—å WebApp —Ç–æ—á–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            const SafeWebApp = window.WebApp;

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º SafeWebApp –≤–º–µ—Å—Ç–æ WebApp
            if (isMaxEnvironment) {
                SafeWebApp.ready();
                SafeWebApp.enableClosingConfirmation();
                SafeWebApp.BackButton.show();
                SafeWebApp.BackButton.onClick(() => {
                    if (formScreen.style.display === 'block') {
                        showMainScreen();
                    } else {
                        SafeWebApp.close();
                    }
                });
            }

            // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô, 
            // –Ω–æ –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º SafeWebApp –≤–º–µ—Å—Ç–æ WebApp
            
            // –ü—Ä–∏–º–µ—Ä:
            const clickablePhone = document.getElementById('clickablePhone');
            clickablePhone.addEventListener('click', async function() {
                const phoneNumber = this.innerText;
                try {
                    await navigator.clipboard.writeText(phoneNumber);
                    if (isMaxEnvironment && SafeWebApp.HapticFeedback) {
                        SafeWebApp.HapticFeedback.notificationOccurred('success');
                    }
                    showToast('üìã –ù–æ–º–µ—Ä —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ' + phoneNumber, 'success');
                } catch (err) {
                    // fallback
                }
            });

            // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            function sendToGroupChat(data) {
                let message = '';
                // ... —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                
                if (isMaxEnvironment) {
                    SafeWebApp.sendData(message); // —Ä–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ MAX
                } else {
                    console.log('üì® –î–µ–º–æ-—Ä–µ–∂–∏–º (GitHub Pages):', message);
                    showToast('üì® –î–µ–º–æ: –∑–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏', 'info');
                }
            }

            // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
        })();
    </script>
</body>
</html>